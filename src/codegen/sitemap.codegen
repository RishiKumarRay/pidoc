const { relative } = require('path');
const { sitemap, helpers } = require('../tools/meta');
const { populateCode, makeContent } = require('../tools/content');

module.exports = function () {
  const content = makeContent.call(this, sitemap);
  const path = relative(__dirname, helpers.filter);

  return `
import filterSitemap from ${JSON.stringify(path)};

${populateCode}

module.exports = filterSitemap(${content});
`;
};
